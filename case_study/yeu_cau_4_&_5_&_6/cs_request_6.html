<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>cs_request_6</title>
    <script type="text/javascript" src="cs_request_6_JS.js"></script>
</head>
<body>
<script>
// khai bao mang listCustomer roi moi goi ham displayMenu duoc, lam
    // nguoc lai se bao loi
let listCustomer = [] ;
let regexEmail = /\S+@\S+\.\S+/ ;
let regexBirthDay = /^[0-9]{2}[\/][0-9]{2}[\/][0-9]{4}$/g ;
let regexIdentify = /^[\d]{8,8}$/ ;
let regexNumber = /^[\d]{1,3}$/ ;

    function displayMenu(){
        let choose = prompt('Input your number selection \n ' +
            '1. Add new customer \n' +
            '2. Display information menu \n' +
            '3. Display total pay of customer \n' +
            '4. Edit information customer \n' +
            '5. Delete customer \n' +
            '6. Exit') ;
        switch (choose) {
            case '1': addNewCustomer(listCustomer) ;
                break ;
            case '2':
                break ;
            case '3': displayTotalPays() ;
                break ;
            case '4':
                break ;
            case '5':
                break ;
            case '6':
                break ;
            default: alert('Failed') ;
        }
    }

    function displayTotalPays() {
        let temp = '' ;
        for(let i = 0; i < listCustomer.length; i++){
            temp += i + '. Name ' + listCustomer[i].getName() + '\n' ;    // temp để lấy check xem nhap co dung hay ko
        }
        // alert(temp) ;                                            // test xem du lieu hien ra co dung ko
        let chooseDisplay = parseInt(prompt(temp)) ;
        alert('Total your order = '+listCustomer[chooseDisplay].setTotalPay() ) ;
    }

    function addNewCustomer(listCustomer){
        let checkvalid = false ;
        let nameCus =  "Nguyen Thanh Tuan";                    // 0

        let identifyCus ='';        // 1
        do{
            identifyCus =  prompt('Input your identify number: ex. 12345678 ') ;            // 1
            if (regexIdentify.test(identifyCus)){
                checkvalid = true ;
            }else {
                alert('Wrong input identify number');
            }
        }while (checkvalid === false );
        checkvalid = false ;

        let birthCus = '';
        do{
            birthCus =  prompt('Input your birth date: ex. dd/mm/yyyy') ;                   // 2
            if(regexBirthDay.test(birthCus)){
                checkvalid = true ;
            }else {
                alert('Wrong input birth day');
            }
        }while (checkvalid===false) ;
        checkvalid = false ;

        let emailCus =  '';      // 3
        do{
            emailCus = prompt('Input your email');
            if(regexEmail.test(emailCus)){
                checkvalid= true;
            }else {
                alert('Wrong input email');
            }
        }while (checkvalid===false) ;
        checkvalid = true;

        let addressCus =  "Quảng Ngải";                 // 4
        let classCus =  "Gold";                         // 5
        let typeSer =  "House";                         // 6
        let levelCus =  "Bussiness";                    // 7
        let quantityCus ;                         // 8
        do{
            quantityCus = parseInt(prompt('Input quantity (only number)') ) ;
            if(regexNumber.test(quantityCus)){
                check = true;
            }else {
                alert('Wrong input quantity');
            }
        }while (checkvalid===false) ;
        checkvalid = true;

        let rentDayCus ;                         // 9
        do{
            rentDayCus = parseInt( prompt('Input rent days (only number )') ) ;
            if(regexNumber.test(rentDayCus)){
                checkvalid = true;
            }else {
                alert('Wrong input number day');
            }
        }while (checkvalid===false) ;
        checkvalid = false ;

        let saleOffCus ;                          // 10
        do{
            saleOffCus = parseInt(prompt('Input % sale off (only number)') ) ;
            if(regexNumber.test(saleOffCus)){
                checkvalid = true;
            }else {
                alert('Wrong input number percent sale off');
            }
        }while (checkvalid===false) ;
        checkvalid = false ;


        let cus = new Customer();       // khai bao doi tuong cus moi
        cus.setName(nameCus) ;
        cus.setIdentify(identifyCus) ;
        cus.setBirthDay(birthCus) ;
        cus.setEmail(emailCus) ;
        cus.setAddress(addressCus) ;
        cus.setClassCustomer(classCus) ;
        cus.setTypeService(typeSer) ;
        cus.setLevel(levelCus) ;
        cus.setQuantity(quantityCus) ;
        cus.setRentDay(rentDayCus) ;
        cus.setSaleOff(saleOffCus) ;

        listCustomer.push(cus) ;
        alert('Sucessful') ;
        displayMenu() ;
    }

displayMenu()


</script>
</body>
</html>